<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Struts2知识点 | Supertramp</title><meta name="keywords" content="java,ssh,框架,struts2"><meta name="author" content="supertramp"><meta name="copyright" content="supertramp"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Struts2概述1 struts2框架应用javaee三层结构中web层框架 2 struts2框架在struts1和webwork基础之上发展全新的框架 3 struts2解决问题：  4 struts2版本  struts-2.3.24-all.zip 5 web层常见框架 1）struts2 2）springMVC Struts2框架入门1 导入jar包 12345678910111213">
<meta property="og:type" content="article">
<meta property="og:title" content="Struts2知识点">
<meta property="og:url" content="https://supertramp7.github.io/struts2/index.html">
<meta property="og:site_name" content="Supertramp">
<meta property="og:description" content="Struts2概述1 struts2框架应用javaee三层结构中web层框架 2 struts2框架在struts1和webwork基础之上发展全新的框架 3 struts2解决问题：  4 struts2版本  struts-2.3.24-all.zip 5 web层常见框架 1）struts2 2）springMVC Struts2框架入门1 导入jar包 12345678910111213">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://supertramp7.github.io/struts2/struts2.png">
<meta property="article:published_time" content="2022-03-10T17:08:48.000Z">
<meta property="article:modified_time" content="2022-04-06T12:19:54.062Z">
<meta property="article:author" content="supertramp">
<meta property="article:tag" content="java">
<meta property="article:tag" content="ssh">
<meta property="article:tag" content="框架">
<meta property="article:tag" content="struts2">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://supertramp7.github.io/struts2/struts2.png"><link rel="shortcut icon" href="/assets/favicon.png"><link rel="canonical" href="https://supertramp7.github.io/struts2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":100},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Struts2知识点',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-04-06 20:19:54'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/assets/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">6</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-times"></i><span> Daily</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/404.html"><i class="fa-fw fas fa-exclamation"></i><span> 404</span></a></li><li><a class="site-page child" href="/daily/mood/"><i class="fa-fw fas fa-comment"></i><span> Mood</span></a></li><li><a class="site-page child" href="/daily/study/"><i class="fa-fw fas fa-book"></i><span> Study</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/struts2/struts2.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Supertramp</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-times"></i><span> Daily</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/404.html"><i class="fa-fw fas fa-exclamation"></i><span> 404</span></a></li><li><a class="site-page child" href="/daily/mood/"><i class="fa-fw fas fa-comment"></i><span> Mood</span></a></li><li><a class="site-page child" href="/daily/study/"><i class="fa-fw fas fa-book"></i><span> Study</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Struts2知识点</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-10T17:08:48.000Z" title="发表于 2022-03-11 01:08:48">2022-03-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-06T12:19:54.062Z" title="更新于 2022-04-06 20:19:54">2022-04-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/">java</a></span></div><div class="meta-secondline"></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Struts2概述"><a href="#Struts2概述" class="headerlink" title="Struts2概述"></a>Struts2概述</h1><p><strong>1 struts2框架应用javaee三层结构中web层框架</strong></p>
<p><strong>2 struts2框架在struts1和webwork基础之上发展全新的框架</strong></p>
<p><strong>3 struts2解决问题：</strong></p>
<p><img src="/struts2/struts2%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98.png" alt="struts2解决问题"></p>
<p><strong>4 struts2版本</strong> </p>
<p>struts-2.3.24-all.zip</p>
<p><strong>5 web层常见框架</strong></p>
<p>1）struts2</p>
<p>2）springMVC</p>
<h1 id="Struts2框架入门"><a href="#Struts2框架入门" class="headerlink" title="Struts2框架入门"></a>Struts2框架入门</h1><p><strong>1 导入jar包</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">asm-3.3.jar</span><br><span class="line">asm-commons-3.3.jar</span><br><span class="line">asm-tree-3.3.jar</span><br><span class="line">commons-fileupload-1.3.1.jar</span><br><span class="line">commons-io-2.2.jar</span><br><span class="line">commons-lang3-3.2.jar</span><br><span class="line">freemarker-2.3.22.jar</span><br><span class="line">javassist-3.11.0.GA.jar</span><br><span class="line">log4j-api-2.2.jar</span><br><span class="line">log4j-core-2.2.jar</span><br><span class="line">ognl-3.0.6.jar</span><br><span class="line">struts2-core-2.3.24.jar</span><br><span class="line">xwork-core-2.3.24.jar</span><br></pre></td></tr></table></figure>

<p>1）在lib中有jar包，不能把这些jar都导入到项目中</p>
<p>2）到apps目录里面，找到示例程序，从示例程序复制jar包</p>
<p><strong>2 创建action</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1 每次访问servlet时候，都会执行service方法</span></span><br><span class="line"><span class="comment"> *   写类继承HttpServlet，重写类里面的方法</span></span><br><span class="line"><span class="comment"> *   在web.xml中配置servlet访问路径</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 2 访问action，每次访问action时候，默认执行名称execute方法</span></span><br><span class="line"><span class="comment"> *   配置action访问路径</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>3 配置action类访问路径</strong></p>
<p>1）创建struts2核心配置文件</p>
<p>核心配置文件名称和位置是固定的</p>
<p>位置必须在src下面，名称 struts.xml</p>
<p>2）引入dtd约束</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">struts</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;-//Apache Software Foundation//DTD Struts Configuration 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://struts.apache.org/dtds/struts-2.3.dtd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3）action配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">struts</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;hellodemo&quot;</span> <span class="attr">extends</span>=<span class="string">&quot;struts-default&quot;</span> <span class="attr">namespace</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        name:访问名称--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.demo.action.HelloAction&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            配置方法的返回值到页面--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;ok&quot;</span>&gt;</span>/hello.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">struts</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>访问路径：</strong></p>
<p><a target="_blank" rel="noopener" href="http://localhost:8080/strust2_demo1/hello.jsp">http://localhost:8080/strust2_demo1/hello.jsp</a></p>
<p><img src="/struts2/%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84.png" alt="访问路径"></p>
<p><strong>4 配置struts2过滤器</strong></p>
<h1 id="Struts2执行过程"><a href="#Struts2执行过程" class="headerlink" title="Struts2执行过程"></a>Struts2执行过程</h1><p><strong>画图分析过程</strong></p>
<p><img src="/struts2/Struts2%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B.png" alt="Struts2执行过程"></p>
<h1 id="查看源代码"><a href="#查看源代码" class="headerlink" title="查看源代码"></a>查看源代码</h1><p><strong>1 过滤器在服务器启动时候创建，创建过滤器时候执行init方法</strong></p>
<p>1）在init方法中主要加载配置文件</p>
<p>包含自己创建的配置文件和struts2自带配置文件</p>
<p>struts.xml</p>
<p>web.xml</p>
<h1 id="Struts2的核心配置文件"><a href="#Struts2的核心配置文件" class="headerlink" title="Struts2的核心配置文件"></a>Struts2的核心配置文件</h1><p><code>struts.xml</code></p>
<p><strong>1 名称和位置固定的</strong></p>
<p> src文件下</p>
<p><strong>2 在配置文件中主要三个标签 package、action、result，标签里面的属性</strong></p>
<h2 id="标签package"><a href="#标签package" class="headerlink" title="标签package"></a>标签package</h2><p><strong>1 类似于代码包，区别不同的action，要配置action，必须首先写package标签，在package里面才能 配置action</strong></p>
<p><strong>2 package标签属性</strong></p>
<p>1）name属性</p>
<p>name属性值根功能本身没有关系的，</p>
<p>在一个配置文件中可以写多个package标签，name属性值不能相同的</p>
<p>2）extends属性</p>
<p>属性值固定的，struts-default</p>
<p>写了这个属性之后，在package里面配置的类便具有action功能</p>
<p>3）namespace属性</p>
<p>namespace属性值和action标签里面的name属性值构成访问路径</p>
<p><img src="/struts2/namespace%E5%B1%9E%E6%80%A7.png" alt="namespace属性"></p>
<h2 id="标签action"><a href="#标签action" class="headerlink" title="标签action"></a>标签action</h2><p><strong>1 action标签配置action访问路径</strong></p>
<p><strong>2 action标签属性</strong></p>
<p>1）name属性</p>
<p>namespace属性值和action标签里面的name属性值构成访问路径</p>
<p>在package标签里面写多个action标签，但是action的name属性值不能相同的</p>
<p>2）class属性</p>
<p>action全路径</p>
<p>3）method属性</p>
<p>比如在action里面默认执行的方法execute方法，但是在action里面写其他的方法</p>
<p>让action里面多个方法执行，使用method进行配置</p>
<h2 id="标签result"><a href="#标签result" class="headerlink" title="标签result"></a>标签result</h2><p><strong>1 根据action的方法返回值，配置到不同的路径里面</strong></p>
<p><strong>2 result标签属性</strong></p>
<p>1）name属性</p>
<p>和方法返回值一样</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置方法的返回值到页面--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;ok&quot;</span>&gt;</span>/hello.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2）type属性</p>
<p>配置如何到路径中（转发或者重定向）</p>
<p>type属性默认值 做转发操作</p>
<h1 id="Struts2常量配置"><a href="#Struts2常量配置" class="headerlink" title="Struts2常量配置"></a>Struts2常量配置</h1><p><strong>1 struts2框架，帮我们实现一部分功能，struts2里面有常量，在常量里面封装一部分功能</strong></p>
<p><strong>2 struts2默认的常量位置（记住）</strong></p>
<p><img src="/struts2/struts2%E9%BB%98%E8%AE%A4%E7%9A%84%E5%B8%B8%E9%87%8F%E4%BD%8D%E7%BD%AE.png" alt="struts2默认的常量位置"></p>
<p><strong>3 修改struts2默认常量值</strong></p>
<p>1）常用的方式</p>
<p>在struts.xml中进行配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">&quot;struts.i18n.encoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constant</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>2）还有两种方式（了解）</p>
<p>在src下面创建 struts.properties，进行修改</p>
<p>在web.xml进行配置</p>
<p><strong>4 介绍最常用常量</strong></p>
<p><img src="/struts2/%E6%9C%80%E5%B8%B8%E7%94%A8%E5%B8%B8%E9%87%8F.png" alt="最常用常量"></p>
<p>1）表单提交数据到action里面，在action可以获取表单提交数据，</p>
<p>2）表单提交数据有中文，有乱码问题，解决：</p>
<p>post提交直接设置编码</p>
<p>get提交做编码转换</p>
<p>3）如果在action获取表单通过post方式提交中文，中文乱码问题帮解决了，不需要自己处理问题</p>
<h1 id="分模块开发"><a href="#分模块开发" class="headerlink" title="分模块开发"></a>分模块开发</h1><p>1 单独写配置文件，把配置文件引入到核心配置文件中</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    引入hello.xml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">&quot;com/demo/action/hello.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Action编写方式"><a href="#Action编写方式" class="headerlink" title="Action编写方式"></a>Action编写方式</h1><h2 id="创建普通类，这个不继承任何类，不实现任何接口"><a href="#创建普通类，这个不继承任何类，不实现任何接口" class="headerlink" title="创建普通类，这个不继承任何类，不实现任何接口"></a>创建普通类，这个不继承任何类，不实现任何接口</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.action;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloAction</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="创建类，实现接口-Action"><a href="#创建类，实现接口-Action" class="headerlink" title="创建类，实现接口 Action"></a>创建类，实现接口 Action</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.action;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.Action;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 实现接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserAction</span> <span class="keyword">implements</span> <span class="title">Action</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="创建类，继承类-ActionSupport（一般使用）"><a href="#创建类，继承类-ActionSupport（一般使用）" class="headerlink" title="创建类，继承类 ActionSupport（一般使用）"></a>创建类，继承类 ActionSupport（一般使用）</h2><p><code>class ActionSupport implements Action</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.action;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="访问action的方法（重点）"><a href="#访问action的方法（重点）" class="headerlink" title="访问action的方法（重点）"></a>访问action的方法（重点）</h1><p><strong>1 有三种方式实现</strong></p>
<p>第一种 使用action标签的method属性，在这个属性里面写执行的action的方法</p>
<p>第二种 使用通配符方式实现</p>
<p>第三种 动态访问实现（不用）</p>
<p><strong>2 演示错误</strong></p>
<p>1）如果action方法有返回值，在配置文件中没有配置，出现错误</p>
<p><img src="/struts2/404.png" alt="404"></p>
<p>2）在action里面的方法有返回值，如果有返回值时候类型必须是String</p>
<p>3）action里面的方法可以没有返回值，没有返回值时候，在result标签不需要配置</p>
<p>把方法写成void</p>
<p>让返回值，返回 ”none”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.action;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;action....&quot;</span>);</span><br><span class="line"><span class="comment">//        return &quot;ok&quot;;</span></span><br><span class="line"><span class="comment">//        return &quot;none&quot;;</span></span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="使用action标签method属性"><a href="#使用action标签method属性" class="headerlink" title="使用action标签method属性"></a>使用action标签method属性</h2><p><strong>1 创建action，创建多个方法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">add</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;add.....&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">update</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;update....&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>2 使用method配置</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;methoddemo&quot;</span> <span class="attr">extends</span>=<span class="string">&quot;struts-default&quot;</span> <span class="attr">namespace</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 有method属性：写要执行的action里面的方法名称 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;addAction&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.demo.method.BookAction&quot;</span> <span class="attr">method</span>=<span class="string">&quot;add&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 执行update方法 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;updateAction&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.demo.method.BookAction&quot;</span> <span class="attr">method</span>=<span class="string">&quot;update&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>缺陷：action每个方法都需要配置，如果action里面有多个方法，配置很多的action</p>
<h2 id="使用通配符实现（重点）"><a href="#使用通配符实现（重点）" class="headerlink" title="使用通配符实现（重点）"></a>使用通配符实现（重点）</h2><p><strong>1 在action标签里面name属性，name属性值里面写 符号 * 星号</strong></p>
<p>1）*  ： 表示匹配任意内容</p>
<p>比如访问hello，* 可以匹配到</p>
<p>比如访问add，* 可以匹配到</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 通配符方式实现 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;methoddemo&quot;</span> <span class="attr">extends</span>=<span class="string">&quot;struts-default&quot;</span> <span class="attr">namespace</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        name属性值里面写符号 *</span></span><br><span class="line"><span class="comment">        1）执行action里面的add方法，访问book_add，使用book_*可以匹配到，* 相当于变成add</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        2）执行action里面的update方法，访问book_update，使用book_*可以匹配到，* 相当于变成update</span></span><br><span class="line"><span class="comment">        上面两个路径使用book_* 可以匹配到</span></span><br><span class="line"><span class="comment">        method属性写 * 值</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;book_*&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.demo.method.BookAction&quot;</span> <span class="attr">method</span>=<span class="string">&quot;&#123;1&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/struts2/03-struts2%E9%80%9A%E9%85%8D%E7%AC%A6.png" alt="03-struts2通配符"></p>
<h1 id="案例-客户列表"><a href="#案例-客户列表" class="headerlink" title="案例-客户列表"></a>案例-客户列表</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.action;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.struts2.ServletActionContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.demo.entity.Customer;</span><br><span class="line"><span class="keyword">import</span> com.demo.service.CustomerService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//客户列表</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">list</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="comment">//调用service</span></span><br><span class="line">      CustomerService service = <span class="keyword">new</span> CustomerService();</span><br><span class="line">      List&lt;Customer&gt; list = service.findAll();</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//放到域对象里面（明天讲到）</span></span><br><span class="line">      HttpServletRequest request = ServletActionContext.getRequest();</span><br><span class="line">      request.setAttribute(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;list&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">struts</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">   <span class="meta-string">&quot;-//Apache Software Foundation//DTD Struts Configuration 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">   <span class="meta-string">&quot;http://struts.apache.org/dtds/struts-2.3.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">struts</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;demo&quot;</span> <span class="attr">extends</span>=<span class="string">&quot;struts-default&quot;</span> <span class="attr">namespace</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;customer_*&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.demo.action.CustomerAction&quot;</span> <span class="attr">method</span>=<span class="string">&quot;&#123;1&#125;&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span>/jsp/customer/list.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">struts</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="结果页面配置"><a href="#结果页面配置" class="headerlink" title="结果页面配置"></a>结果页面配置</h1><h2 id="全局结果页面"><a href="#全局结果页面" class="headerlink" title="全局结果页面"></a>全局结果页面</h2><p><strong>1 result标签配置action方法的返回值到不同的路径里面</strong></p>
<p><strong>2 创建两个action，执行默认的方法execute方法，让两个action的方法都返回success，返回success之后，配置到同一个页面里面</strong></p>
<p>1）如果多个action，方法里面返回值相同的，到页面也是相同的，这个时候可以使用全局结果页面配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;demo1&quot;</span> <span class="attr">extends</span>=<span class="string">&quot;struts-default&quot;</span> <span class="attr">namespace</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.demo.action.BookAction&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;success&quot;</span>&gt;</span>/hello.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;orders&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.demo.action.OrdersAction&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;success&quot;</span>&gt;</span>/hello.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>2）在package标签里面配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 全局结果页面配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">global-results</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;success&quot;</span>&gt;</span>/hello.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">global-results</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="局部结果页面"><a href="#局部结果页面" class="headerlink" title="局部结果页面"></a>局部结果页面</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.demo.action.BookAction&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;success&quot;</span>&gt;</span>/hello.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>1 配置全局页面，也配置了局部页面，最终以局部配置为准</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 全局结果页面配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">global-results</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;success&quot;</span>&gt;</span>/hello.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">global-results</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.demo.action.BookAction&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;success&quot;</span>&gt;</span>/hello.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="Result标签的type属性"><a href="#Result标签的type属性" class="headerlink" title="Result标签的type属性"></a>Result标签的type属性</h2><p><strong>1 result标签里面除了name属性之外，还有一个属性 type属性</strong></p>
<p>1）type属性：如何到路径里面（转发还是重定向）</p>
<p><strong>2 type属性值</strong></p>
<p>1）默认值，做转发操作（一次请求，地址栏不变），值是 dispatcher</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;success&quot;</span> <span class="attr">type</span>=<span class="string">&quot;dispatcher&quot;</span>&gt;</span>/world.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/struts2/dispatcher.png" alt="dispatcher"></p>
<p>2）做重定向操作（两次请求，地址栏改变），值是 redirect</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;success&quot;</span> <span class="attr">type</span>=<span class="string">&quot;redirect&quot;</span>&gt;</span>/world.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/struts2/redirect.png" alt="redirect"></p>
<p>3）上面两个值dispatcher、redirect，这两个值一般针对到页面中配置，</p>
<p>配置到其他的action里面</p>
<p>chain：转发到action，一般不用，缓存问题</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;success&quot;</span> <span class="attr">type</span>=<span class="string">&quot;chain&quot;</span>&gt;</span>orders<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>redirectAction：重定向到action</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;success&quot;</span> <span class="attr">type</span>=<span class="string">&quot;redirectAction&quot;</span>&gt;</span>orders<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="Action获取表单提交数据"><a href="#Action获取表单提交数据" class="headerlink" title="Action获取表单提交数据"></a>Action获取表单提交数据</h1><p><strong>1 之前web阶段，提交表单到servlet里面，在servlet里面使用request对象里面的方法获取，getParameter，getParameterMap</strong></p>
<p><strong>2 提交表单到action，但是action没有request对象，不能直接使用request对象</strong></p>
<p><strong>3 action获取表单提交数据主要三种方式</strong></p>
<p>1）使用ActionContext类</p>
<p>2）使用ServletActionContext类</p>
<p>3）使用接口注入方式</p>
<h2 id="使用ActionContext类获取"><a href="#使用ActionContext类获取" class="headerlink" title="使用ActionContext类获取"></a>使用ActionContext类获取</h2><p><img src="/struts2/ActionContext%E7%B1%BBgetParameters%E6%96%B9%E6%B3%95.png" alt="ActionContext类getParameters方法"></p>
<p>1）因为方法不是静态的方法，需要创建ActionContext类的对象</p>
<p>2）这个ActionContext类对象不是new出来的</p>
<p><img src="/struts2/ActionContext%E7%B1%BBgetContext%E6%96%B9%E6%B3%95.png" alt="ActionContext类getContext方法"></p>
<p><strong>1 具体演示</strong></p>
<p>1）创建表单，提交表单到action里面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--form1.jsp--%&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/form1.action&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    username: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    password: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;password&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    address: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;address&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;submit&gt;提交&lt;/submit&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- struts.xml --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 获取表单提交的数据 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;demo2&quot;</span> <span class="attr">extends</span>=<span class="string">&quot;struts-default&quot;</span> <span class="attr">namespace</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;form1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.demo.form.Form1Action&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>2）在action使用ActionContext获取数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.form;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionContext;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Form1Action</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 第一种方式 使用ActionContext类获取数据</span></span><br><span class="line">        <span class="comment">// 1 获取ActionContext对象</span></span><br><span class="line">        ActionContext context = ActionContext.getContext();</span><br><span class="line">        <span class="comment">// 2 调用getParameters方法得到表单数据</span></span><br><span class="line">        <span class="comment">// key是表单输入项name属性值，value是输入的值</span></span><br><span class="line">        Map&lt;String, Object&gt; map = context.getParameters();</span><br><span class="line"></span><br><span class="line">        Set&lt;String&gt; keys = map.keySet();</span><br><span class="line">        <span class="keyword">for</span> (String key : keys) &#123;</span><br><span class="line">            <span class="comment">// 根据key得到value</span></span><br><span class="line">            <span class="comment">// 数组形式：因为输入项里面可能有复选框的情况</span></span><br><span class="line">            Object[] obj = (Object[]) map.get(key);</span><br><span class="line">            System.out.println(Arrays.toString(obj));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="使用ServletActionContext类获取"><a href="#使用ServletActionContext类获取" class="headerlink" title="使用ServletActionContext类获取"></a>使用ServletActionContext类获取</h2><p><img src="/struts2/%E4%BD%BF%E7%94%A8ServletActionContext%E7%B1%BB%E8%8E%B7%E5%8F%96.png" alt="使用ServletActionContext类获取"></p>
<p><strong>1 调用类里面静态方法，得到request对象</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.form;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionContext;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"><span class="keyword">import</span> org.apache.struts2.ServletActionContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Form2Action</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 第二种方式 使用ServletActionContext获取</span></span><br><span class="line">        <span class="comment">// 1 使用ServletActionContext获取request对象</span></span><br><span class="line">        HttpServletRequest request = ServletActionContext.getRequest();</span><br><span class="line">        <span class="comment">// 2 调用request里面的方法得到结果</span></span><br><span class="line">        String username = request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password = request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        String address = request.getParameter(<span class="string">&quot;address&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;username: &quot;</span> + username</span><br><span class="line">                            + <span class="string">&quot;/npassword: &quot;</span> + password</span><br><span class="line">                            + <span class="string">&quot;/naddress: &quot;</span> + address);</span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="使用接口注入（了解）"><a href="#使用接口注入（了解）" class="headerlink" title="使用接口注入（了解）"></a>使用接口注入（了解）</h2><p><strong>1 让action实现接口，为了得到request对象</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.form;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"><span class="keyword">import</span> org.apache.struts2.interceptor.ServletRequestAware;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Form3Action</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> <span class="keyword">implements</span> <span class="title">ServletRequestAware</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> HttpServletRequest request;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String username = request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password = request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        String address = request.getParameter(<span class="string">&quot;address&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;username: &quot;</span> + username</span><br><span class="line">                + <span class="string">&quot;/npassword: &quot;</span> + password</span><br><span class="line">                + <span class="string">&quot;/naddress: &quot;</span> + address);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setServletRequest</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.request = request;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="在action操作域对象"><a href="#在action操作域对象" class="headerlink" title="在action操作域对象"></a>在action操作域对象</h2><p><strong>1 request、session、servletContext域对象</strong></p>
<p><strong>2 使用ServletActionContext类操作</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 操作三个域对象</span></span><br><span class="line"><span class="comment">// 1 request域</span></span><br><span class="line">HttpServletRequest request = ServletActionContext.getRequest();</span><br><span class="line">request.getParameter(<span class="string">&quot;req&quot;</span>, <span class="string">&quot;reqValue&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 session域</span></span><br><span class="line">HttpSession session = request.getSession();</span><br><span class="line">session.getAttribute(<span class="string">&quot;sess&quot;</span>, <span class="string">&quot;sessValue&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3 ServletContext域</span></span><br><span class="line">ServletContext context = ServletActionContext.getServletContext();</span><br><span class="line">context.setAttribute(<span class="string">&quot;contextname&quot;</span>, <span class="string">&quot;contextValue&quot;</span>);</span><br></pre></td></tr></table></figure>



<h1 id="Struts2封装获取表单数据方式"><a href="#Struts2封装获取表单数据方式" class="headerlink" title="Struts2封装获取表单数据方式"></a>Struts2封装获取表单数据方式</h1><h2 id="原始方式获取表单封装到实体类对象"><a href="#原始方式获取表单封装到实体类对象" class="headerlink" title="原始方式获取表单封装到实体类对象"></a>原始方式获取表单封装到实体类对象</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.form;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.demo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"><span class="keyword">import</span> org.apache.struts2.ServletActionContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用ServletActionContext获取表单数据封装到实体类对象里面</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Form4Action</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1 获取表单数据</span></span><br><span class="line">        HttpServletRequest request = ServletActionContext.getRequest();</span><br><span class="line">        String username = request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password = request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        String address = request.getParameter(<span class="string">&quot;address&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2 封装到实体类对象里面</span></span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setUsername(username);</span><br><span class="line">        user.setPassword(password);</span><br><span class="line">        user.setAddress(address);</span><br><span class="line"></span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="属性封装（会用）"><a href="#属性封装（会用）" class="headerlink" title="属性封装（会用）"></a>属性封装（会用）</h2><p><strong>1 直接把表单提交属性封装到action的属性里面</strong></p>
<p><strong>2 实现步骤</strong></p>
<p>1）在action成员变量位置定义变量</p>
<p>变量名称和表单输入项的name属性值一样</p>
<p>2）生成变量的set方法（把set和get方法都写出来）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用属性封装获取表单数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataDemo1Action</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1 定义变量</span></span><br><span class="line">    <span class="comment">// 变量的名称要和表单输入项name属性值一样</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成变量的set和get方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(String address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;username: &quot;</span> + username</span><br><span class="line">                + <span class="string">&quot;/npassword: &quot;</span> + password</span><br><span class="line">                + <span class="string">&quot;/naddress: &quot;</span> + address);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>3 使用属性封装获取表单数据到属性里面，不能把数据直接封装到实体类对象里面</strong></p>
<h2 id="模型驱动封装（重点）"><a href="#模型驱动封装（重点）" class="headerlink" title="模型驱动封装（重点）"></a>模型驱动封装（重点）</h2><p><strong>1 使用模型驱动方式，可以直接把表单数据封装到实体类对象里面</strong></p>
<p><strong>2 实现步骤</strong></p>
<p>1）action实现接口 ModelDriven</p>
<p>2）实现接口里面的方法 getModel方法</p>
<p>把创建对象返回</p>
<p>3）在action里面创建实体类对象</p>
<p><strong>前提要求：表单输入项name属性值 和 实体类属性名称 一样</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.demo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ModelDriven;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用模型驱动的方式获取表单数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataDemo2Action</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> <span class="keyword">implements</span> <span class="title">ModelDriven</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建对象</span></span><br><span class="line">    <span class="comment">// 前提要求：表单输入项name属性值 和 实体类属性名称 一样</span></span><br><span class="line">    <span class="keyword">private</span> User user = <span class="keyword">new</span> User();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getModel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 返回创建的user对象</span></span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>3 使用模型驱动和属性封装注意问题：</strong></p>
<p>1）在一个action中，获取表单数据可以属性封装，使用模型驱动封装，</p>
<p>不能同时使用属性封装和模型驱动封装获取同一个表单数据</p>
<p>如果同时使用，之后执行模型驱动</p>
<h2 id="表达式封装（会用）"><a href="#表达式封装（会用）" class="headerlink" title="表达式封装（会用）"></a>表达式封装（会用）</h2><p><strong>1 实现过程</strong></p>
<p>1）使用表达式封装可以把表单数据封装到实体类对象里面</p>
<p>第一步 在action里面声明实体类</p>
<p>第二步 生成实体类变量的set和get方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.demo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ModelDriven;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用 表达式封装 的方式获取表单数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataDemo3Action</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1 声明实体类</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">    <span class="comment">// 2 生成实体类变量的set和get方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第三步 在表单输入项的name属性值里面写表达式形式</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/data3.action&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    username: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;user.username&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    password: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;user.password&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    address: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;user.address&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>



<p><strong>2 把表达式封装归类到属性封装里面</strong></p>
<h2 id="比较表达式封装和模型驱动封装"><a href="#比较表达式封装和模型驱动封装" class="headerlink" title="比较表达式封装和模型驱动封装"></a>比较表达式封装和模型驱动封装</h2><p><strong>1 使用表达式封装和模型驱动封装都可以把数据封装到实体类对象里面</strong></p>
<p><strong>2 不同点</strong></p>
<p>1）使用模型驱动只能把数据封装到一个实体类对象里面</p>
<p>在一个action里面不能使用模型驱动把数据封装到不同的实体类对象里面</p>
<p>2）使用表达式封装可以把数据封装到不同的实体类对象里面</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.demo.entity.Book;</span><br><span class="line"><span class="keyword">import</span> com.demo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ModelDriven;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用 表达式封装 的方式获取表单数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataDemo3Action</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1 声明实体类</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">    <span class="keyword">private</span> Book book;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2 生成实体类变量的set和get方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Book <span class="title">getBook</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> book;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBook</span><span class="params">(Book book)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.book = book;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(user);</span><br><span class="line">        System.out.println(book);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/data3.action&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    username: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;user.username&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    password: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;user.password&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    address: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;user.address&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    bname: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;book.bname&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>



<h1 id="封装到集合里面"><a href="#封装到集合里面" class="headerlink" title="封装到集合里面"></a>封装到集合里面</h1><h2 id="封装数据到List集合"><a href="#封装数据到List集合" class="headerlink" title="封装数据到List集合"></a>封装数据到List集合</h2><p><strong>1 在action声明List</strong></p>
<p><strong>2 生成list变量的set和get方法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.demo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 封装数据到list集合</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1 声明List变量</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; list;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2 生成list变量的set和get方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setList</span><span class="params">(List&lt;User&gt; list)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>3 在表单输入项里面写表达式</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/list.action&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    username: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;list[0].username&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    password: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;list[0].password&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    address: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;list[0].address&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    username: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;list[1].username&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    password: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;list[1].password&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    address: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;list[1].address&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>



<h2 id="封装数据到Map集合"><a href="#封装数据到Map集合" class="headerlink" title="封装数据到Map集合"></a>封装数据到Map集合</h2><p><strong>1 声明map集合</strong></p>
<p><strong>2 生成get和set方法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.demo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 封装数据到map集合</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1 声明map变量</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, User&gt; map;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2 生成map变量的set和get方法</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, User&gt; <span class="title">getMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMap</span><span class="params">(Map&lt;String, User&gt; map)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.map = map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(map);</span><br><span class="line">        <span class="keyword">return</span> NONE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>3 在表单输入项的name属性值里面写表达式</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/map.action&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;%-- 设置key值map[<span class="string">&#x27;key值&#x27;</span>]</span><br><span class="line">         设置value值</span><br><span class="line">     --%&gt;</span><br><span class="line">    username: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;map[&#x27;one&#x27;].username&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    password: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;map[&#x27;one&#x27;].password&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    address: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;map[&#x27;one&#x27;].address&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    username: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;map[&#x27;two&#x27;].username&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    password: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;map[&#x27;two&#x27;].password&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    address: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;map[&#x27;two&#x27;].address&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>



<h1 id="封装数据总结"><a href="#封装数据总结" class="headerlink" title="封装数据总结"></a>封装数据总结</h1><p><strong>1 属性封装</strong></p>
<p>定义变量，变量和表单输入项name属性值一样，生成get和set方法</p>
<p><strong>2 模型驱动封装（重点）</strong></p>
<p>实现接口，实现接口里面的方法，表单输入项name属性值和实体类属性名称一样</p>
<p><strong>3 表达式封装</strong></p>
<p><strong>4 表达式封装和模型驱动封装比较</strong></p>
<p>相同点：可以把数据封装到实体类对象里面</p>
<p>不同点：表达式封装可以封装到不同的实体类里面</p>
<h1 id="案例-添加客户功能"><a href="#案例-添加客户功能" class="headerlink" title="案例-添加客户功能"></a>案例-添加客户功能</h1><p><strong>1 模型驱动获取表单数据</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.action;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ModelDriven;</span><br><span class="line"><span class="keyword">import</span> org.apache.struts2.ServletActionContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.demo.entity.Customer;</span><br><span class="line"><span class="keyword">import</span> com.demo.service.CustomerService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> <span class="keyword">implements</span> <span class="title">ModelDriven</span>&lt;<span class="title">Customer</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Customer customer = <span class="keyword">new</span> Customer();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Customer <span class="title">getModel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> customer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加客户</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">addCustomer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 调用service的方法添加到数据库</span></span><br><span class="line">        CustomerService service = <span class="keyword">new</span> CustomerService();</span><br><span class="line">        service.addCustomer(customer);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;addCustomer&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 到添加页面</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toAddPage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;toAddPage&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//客户列表</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">list</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//调用service</span></span><br><span class="line">        CustomerService service = <span class="keyword">new</span> CustomerService();</span><br><span class="line">        List&lt;Customer&gt; list = service.findAll();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//放到域对象里面（明天讲到）</span></span><br><span class="line">        HttpServletRequest request = ServletActionContext.getRequest();</span><br><span class="line">        request.setAttribute(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;list&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>2 在hibernate实现</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加客户的方法</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCustomer</span><span class="params">(Customer customer)</span> </span>&#123;</span><br><span class="line">   SessionFactory sessionFactory = <span class="keyword">null</span>;</span><br><span class="line">   Session session = <span class="keyword">null</span>;</span><br><span class="line">   Transaction tx = <span class="keyword">null</span>;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">      sessionFactory = HibernateUtils.getSessionFactory();</span><br><span class="line">      session = sessionFactory.openSession();</span><br><span class="line">      tx = session.beginTransaction();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 添加代码</span></span><br><span class="line">      <span class="comment">// 返回值：添加到数据库里面，生成id值，返回id值</span></span><br><span class="line">      Serializable id = session.save(customer);</span><br><span class="line">      <span class="keyword">if</span> (id != <span class="keyword">null</span>)&#123;</span><br><span class="line">         System.out.println(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         System.out.println(<span class="string">&quot;fail&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      tx.commit();</span><br><span class="line">   &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">      tx.rollback();</span><br><span class="line">   &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">      session.close();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>3 添加之后到列表页面中，让列表的action执行一次</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 添加之后到列表页面</span></span><br><span class="line"><span class="comment">     请求一次列表的action</span></span><br><span class="line"><span class="comment">     type属性：chain会有缓存问题，一般使用redirectAction</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;addCustomer&quot;</span> <span class="attr">type</span>=<span class="string">&quot;redirectAction&quot;</span>&gt;</span>customer_list<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="OGNL概述"><a href="#OGNL概述" class="headerlink" title="OGNL概述"></a>OGNL概述</h1><p><strong>1 之前web阶段，学习过EL表达式，EL表达式在jsp中获取域对象里面的值</strong></p>
<p><strong>2 OGNL是一种表达式，这个表达式功能更加强大</strong></p>
<p>1）在struts2里面操作值栈数据</p>
<p>2）一般把ognl在struts2操作：和struts2标签一起使用操作值栈</p>
<p><strong>3 OGNL不是struts2的一部分，单独的项目，经常和struts2一起使用</strong></p>
<p>1）使用ognl时候首先导入jar包，struts2提供jar包</p>
<h1 id="OGNL入门案例"><a href="#OGNL入门案例" class="headerlink" title="OGNL入门案例"></a>OGNL入门案例</h1><p><strong>1 使用ognl+struts2标签实现计算字符串长度</strong></p>
<p>1）在java代码中，调用字符串.length();</p>
<p><strong>2 使用struts2标签</strong></p>
<p>1）使用jstl时候，导入jar包之外，在jsp页面中引入标签库</p>
<p>使用struts2标签时候，在jsp中引入标签库</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;s&quot;</span> uri=<span class="string">&quot;/struts-tags&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>



<p>2）使用struts2标签实现操作</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:property value=<span class="string">&quot;&#x27;haha&#x27;.length()&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>





<h1 id="什么是值栈"><a href="#什么是值栈" class="headerlink" title="什么是值栈"></a>什么是值栈</h1><p><strong>1 之前在web阶段，在servlet里面进行操作，把数据放到域对象里面，在页面中使用el表达式获取到，域对象在一定范围内，存值和取值</strong></p>
<p><strong>2 在struts2里面提供本身一种存储机制，类似于域对象，是值栈，可以存值和取值</strong></p>
<p>1）在action里面把数据放到值栈里面，在页面中获取到值栈数据</p>
<p><strong>3 servlet和action区别</strong></p>
<p>1）Servlet：默认在第一次访问时候创建，创建一次，单实例对象</p>
<p>2）Action：访问时候创建，每次访问action时候，都会创建action对象，创建多次，多实例对象</p>
<p><strong>4 值栈存储位置</strong></p>
<p>1）每次访问action时候，都会创建action对象，</p>
<p>2）在每个action对象里面都会有一个值栈对象（只有一个）</p>
<p><img src="/struts2/%E5%80%BC%E6%A0%88%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE.png" alt="值栈存储位置"></p>
<h1 id="获取值栈对象"><a href="#获取值栈对象" class="headerlink" title="获取值栈对象"></a>获取值栈对象</h1><p><strong>1 获取值栈对象有多种方式</strong></p>
<p>1）常用方式：使用ActionContext类里面的方法得到值栈对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 获取ActionContext类的对象</span></span><br><span class="line">ActionContext context = ActionContext.getContext();</span><br><span class="line"><span class="comment">// 2 调用方法得到值栈对象</span></span><br><span class="line">ValueStack stack1 = context.getValueStack();</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>2 每个action对象中只有一个值栈对象</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 获取ActionContext类的对象</span></span><br><span class="line">ActionContext context = ActionContext.getContext();</span><br><span class="line"><span class="comment">// 2 调用方法得到值栈对象</span></span><br><span class="line">ValueStack stack1 = context.getValueStack();</span><br><span class="line"></span><br><span class="line">ValueStack stack2 = context.getValueStack();</span><br><span class="line"></span><br><span class="line">System.out.println(stack1 == stack2); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><strong>3 栈的结构</strong></p>
<p><img src="/struts2/%E5%80%BC%E6%A0%88%E5%AF%B9%E8%B1%A1.png" alt="值栈对象"></p>
<h1 id="值栈内部结构"><a href="#值栈内部结构" class="headerlink" title="值栈内部结构"></a>值栈内部结构</h1><p><strong>1 值栈分为两部分：</strong>    </p>
<p>第一部分 root，结构是list集合</p>
<p>1）一般操作都是root里面数据</p>
<p><img src="/struts2/%E4%B8%80%E8%88%AC%E6%93%8D%E4%BD%9C%E9%83%BD%E6%98%AFroot%E9%87%8C%E9%9D%A2%E6%95%B0%E6%8D%AE.png" alt="一般操作都是root里面数据"></p>
<p>第二部分 context，结构map集合</p>
<p><img src="/struts2/context%EF%BC%8C%E7%BB%93%E6%9E%84map%E9%9B%86%E5%90%88.png" alt="context，结构map集合"></p>
<p><strong>2 struts2里面标签 s:debug，使用这个标签可以查看值栈结构和存储值</strong></p>
<p>1）访问action，执行action的方法有返回值，配置返回值到jsp页面中，在jsp页面中使用这个标签</p>
<p><img src="/struts2/debug.png" alt="debug"></p>
<p>点击超链接看到结构</p>
<p><img src="/struts2/stackvaluedebug.png" alt="stackvaluedebug"></p>
<p>2）在action没有做任何操作，栈顶元素是 action引用</p>
<p><code>com.demo.action.ValueStackAction</code></p>
<p>action对象里面有值栈对象</p>
<p>值栈对象里面有action引用</p>
<h1 id="向值栈放数据"><a href="#向值栈放数据" class="headerlink" title="向值栈放数据"></a>向值栈放数据</h1><p><strong>1 向值栈放数据多种方式</strong></p>
<p>第一种 获取值栈对象，调用值栈对象里面的 set 方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一种 获取值栈对象，调用值栈对象里面的 set 方法</span></span><br><span class="line"><span class="comment">// 1 获取值栈对象</span></span><br><span class="line">ActionContext context = ActionContext.getContext();</span><br><span class="line">ValueStack valueStack = context.getValueStack();</span><br><span class="line"><span class="comment">// 2 调用值栈对象里面的 set 方法</span></span><br><span class="line">valueStack.set(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;zoey&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>![获取值栈对象，调用值栈对象里面的 set 方法](/struts2/获取值栈对象，调用值栈对象里面的 set 方法.png)</p>
<p>第二种 获取值栈对象，调用值栈对象里面的 push方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第二种 获取值栈对象，调用值栈对象里面的 push方法</span></span><br><span class="line"><span class="comment">// 1 获取值栈对象</span></span><br><span class="line">ActionContext context = ActionContext.getContext();</span><br><span class="line">ValueStack valueStack = context.getValueStack();</span><br><span class="line"><span class="comment">// 2 调用值栈对象里面的 push方法</span></span><br><span class="line">valueStack.push(<span class="string">&quot;aaaA&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>![获取值栈对象，调用值栈对象里面的 push方法](/struts2/获取值栈对象，调用值栈对象里面的 push方法.png)</p>
<p>第三种 在action定义变量，生成变量的get方法（重点）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 定义变量</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 生成get方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// 3 在执行的方法里面向变量设置值</span></span><br><span class="line">    name = <span class="string">&quot;jisoo&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/struts2/%E5%9C%A8action%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F%EF%BC%8C%E7%94%9F%E6%88%90%E5%8F%98%E9%87%8F%E7%9A%84get%E6%96%B9%E6%B3%95.png" alt="在action定义变量，生成变量的get方法"></p>
<h2 id="向值栈放对象"><a href="#向值栈放对象" class="headerlink" title="向值栈放对象"></a>向值栈放对象</h2><p><strong>1 定义对象变量</strong></p>
<p><strong>2 生成变量的get方法</strong></p>
<p><strong>3 在执行的方法里面向对象中设置值</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.action;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.demo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObjectDemoAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1 定义对象变量</span></span><br><span class="line">    <span class="keyword">private</span> User user = <span class="keyword">new</span> User();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2 生成变量的get方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3 在执行的方法里面向对象中设置值</span></span><br><span class="line">        user.setUsername(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        user.setAddress(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/struts2/%E5%90%91%E5%80%BC%E6%A0%88%E6%94%BE%E5%AF%B9%E8%B1%A1.png" alt="向值栈放对象"></p>
<h2 id="向值栈放list集合"><a href="#向值栈放list集合" class="headerlink" title="向值栈放list集合"></a>向值栈放list集合</h2><p><strong>1 定义list集合变量</strong></p>
<p><strong>2 生成变量的get方法</strong></p>
<p><strong>3 在执行的方法里面向list集合设置值</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.action;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.demo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListDemoAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1 定义list集合变量</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;User&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2 生成变量的get方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3 在执行的方法里面向list集合设置值</span></span><br><span class="line">        User user1 = <span class="keyword">new</span> User();</span><br><span class="line">        user1.setUsername(<span class="string">&quot;111&quot;</span>);</span><br><span class="line">        user1.setPassword(<span class="string">&quot;111&quot;</span>);</span><br><span class="line">        user1.setAddress(<span class="string">&quot;111&quot;</span>);</span><br><span class="line"></span><br><span class="line">        User user2 = <span class="keyword">new</span> User();</span><br><span class="line">        user2.setUsername(<span class="string">&quot;222&quot;</span>);</span><br><span class="line">        user2.setPassword(<span class="string">&quot;222&quot;</span>);</span><br><span class="line">        user2.setAddress(<span class="string">&quot;222&quot;</span>);</span><br><span class="line"></span><br><span class="line">        list.add(user1);</span><br><span class="line">        list.add(user2);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/struts2/%E5%90%91%E5%80%BC%E6%A0%88%E6%94%BElist%E9%9B%86%E5%90%88.png" alt="向值栈放list集合"></p>
<h1 id="从值栈获取数据"><a href="#从值栈获取数据" class="headerlink" title="从值栈获取数据"></a>从值栈获取数据</h1><p><strong>1 使用struts2的标签+ognl表达式获取值栈数据</strong></p>
<p>1）&lt;s:property value=”ognl表达式”/&gt;</p>
<h2 id="获取字符串"><a href="#获取字符串" class="headerlink" title="获取字符串"></a>获取字符串</h2><p><strong>1 向值栈放字符串</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.valuestack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ValueStackAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        username = <span class="string">&quot;hahahaha&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>2 在jsp使用struts2标签+ognl表达式获取</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--获取字符串值--%&gt;</span><br><span class="line">&lt;s:property value=<span class="string">&quot;username&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>



<h2 id="获取对象"><a href="#获取对象" class="headerlink" title="获取对象"></a>获取对象</h2><p><strong>1 向值栈放对象</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">private User user &#x3D; new User();</span><br><span class="line"></span><br><span class="line">public User getUser() &#123;</span><br><span class="line">    return user;</span><br><span class="line">&#125;</span><br><span class="line">@Override</span><br><span class="line">public String execute() throws Exception &#123;</span><br><span class="line">	user.setUsername(&quot;aaa&quot;);</span><br><span class="line">	user.setPassword(&quot;aaa&quot;);</span><br><span class="line">	user.setAddress(&quot;aaa&quot;);</span><br><span class="line">	return &quot;success&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>2 在页面中获取值</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--获取对象的值--%&gt;</span><br><span class="line">&lt;s:property value=<span class="string">&quot;user.username&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">&lt;s:property value=<span class="string">&quot;user.password&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">&lt;s:property value=<span class="string">&quot;user.address&quot;</span>/&gt;&lt;br&gt;</span><br></pre></td></tr></table></figure>



<h2 id="获取list集合"><a href="#获取list集合" class="headerlink" title="获取list集合"></a>获取list集合</h2><p><strong>第一种方式：</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--获取list的值--%&gt;</span><br><span class="line">&lt;%--第一种方式--%&gt;</span><br><span class="line">&lt;s:property value=<span class="string">&quot;list[0].username&quot;</span>/&gt;</span><br><span class="line">&lt;s:property value=<span class="string">&quot;list[0].password&quot;</span>/&gt;</span><br><span class="line">&lt;s:property value=<span class="string">&quot;list[0].address&quot;</span>/&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;s:property value=<span class="string">&quot;list[1].username&quot;</span>/&gt;</span><br><span class="line">&lt;s:property value=<span class="string">&quot;list[1].password&quot;</span>/&gt;</span><br><span class="line">&lt;s:property value=<span class="string">&quot;list[1].address&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>



<p><strong>第二种方式：</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--第二种方式--%&gt;</span><br><span class="line">&lt;s:iterator value=<span class="string">&quot;list&quot;</span>&gt;</span><br><span class="line">    &lt;%-- 遍历list，得到list里面每个user对象 --%&gt;</span><br><span class="line">    &lt;s:property value=<span class="string">&quot;username&quot;</span>/&gt;</span><br><span class="line">    &lt;s:property value=<span class="string">&quot;password&quot;</span>/&gt;</span><br><span class="line">    &lt;s:property value=<span class="string">&quot;address&quot;</span>/&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">&lt;/s:iterator&gt;</span><br></pre></td></tr></table></figure>



<p><strong>第三种方式：</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--第三种方式--%&gt;</span><br><span class="line">&lt;s:iterator value=<span class="string">&quot;list&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;user&quot;</span>&gt;</span><br><span class="line">    &lt;%--</span><br><span class="line">        遍历值栈list集合，得到每个user对象</span><br><span class="line">        机制：把每次遍历出来的user对象放到context里面</span><br><span class="line">        获取context里面数据特点：写ognl表达式，使用特殊符号#</span><br><span class="line">    --%&gt;</span><br><span class="line">    &lt;s:property value=<span class="string">&quot;#user.username&quot;</span>/&gt;</span><br><span class="line">    &lt;s:property value=<span class="string">&quot;#user.password&quot;</span>/&gt;</span><br><span class="line">    &lt;s:property value=<span class="string">&quot;#user.address&quot;</span>/&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">&lt;/s:iterator&gt;</span><br></pre></td></tr></table></figure>



<h2 id="其他操作"><a href="#其他操作" class="headerlink" title="其他操作"></a>其他操作</h2><p><strong>1 使用set方法向值栈放数据，获取</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2 调用值栈对象里面的 set 方法</span></span><br><span class="line">valueStack.set(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;zoey&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--获取set方法设置的值 根据名称获取值--%&gt;</span><br><span class="line">&lt;s:property value=<span class="string">&quot;username&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>



<p><strong>2 使用push方法向值栈放数据，获取</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调用值栈对象里面的 push方法</span></span><br><span class="line">valueStack.push(<span class="string">&quot;aaaA&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>1）使用push方法设置值，没有名称，只有设置的值</p>
<p>2）向值栈放数据，把向值栈放数据存到数组里面，数组名称 top，根据数组获取值</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:property value=<span class="string">&quot;[0].top&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>



<h1 id="EL表达式获取值栈数据（为什么）"><a href="#EL表达式获取值栈数据（为什么）" class="headerlink" title="EL表达式获取值栈数据（为什么）"></a>EL表达式获取值栈数据（为什么）</h1><p><strong>1 EL表达式获取域对象值</strong></p>
<p><strong>2 向域对象里面放值使用setAttribute方法，获取值使用getAttribute方法</strong></p>
<p><strong>3 底层增强request对象里面的方法getAttribute方法</strong></p>
<p>1）首先从request域获取值，如果获取到，直接返回</p>
<p>2）如果从request域获取不到值，到值栈中把值获取出来，把值放到域对象里面</p>
<h1 id="OGNL的-、-使用"><a href="#OGNL的-、-使用" class="headerlink" title="OGNL的#、%使用"></a>OGNL的#、%使用</h1><h2 id="使用"><a href="#使用" class="headerlink" title="#使用"></a>#使用</h2><p><strong>1 使用#获取context里面数据</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--第三种方式--%&gt;</span><br><span class="line">&lt;s:iterator value=<span class="string">&quot;list&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;user&quot;</span>&gt;</span><br><span class="line">    &lt;%--</span><br><span class="line">        遍历值栈list集合，得到每个user对象</span><br><span class="line">        机制：把每次遍历出来的user对象放到context里面</span><br><span class="line">        获取context里面数据特点：写ognl表达式，使用特殊符号#</span><br><span class="line">    --%&gt;</span><br><span class="line">    &lt;s:property value=<span class="string">&quot;#user.username&quot;</span>/&gt;</span><br><span class="line">    &lt;s:property value=<span class="string">&quot;#user.password&quot;</span>/&gt;</span><br><span class="line">    &lt;s:property value=<span class="string">&quot;#user.address&quot;</span>/&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">&lt;/s:iterator&gt;</span><br></pre></td></tr></table></figure>



<p><strong>2 演示# 操作</strong></p>
<p>1）向request域放值</p>
<p>2）在页面中使用ognl获取</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">获取context里面数据，写ognl时候，首先添加符号</span><br><span class="line">#context的key名称.域对象名称</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;s:property value=<span class="string">&quot;#request.req&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>



<h2 id="使用-1"><a href="#使用-1" class="headerlink" title="%使用"></a>%使用</h2><p><strong>1 在struts2标签中表单标签</strong></p>
<p>1）在struts2标签里面使用ognl表达式，如果直接在struts2表单标签里面使用ognl表达式不识别，只有%之后才会识别</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:textfield name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;%&#123;#request.req&#125;&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>



<h1 id="案例-列表功能改造（值栈）"><a href="#案例-列表功能改造（值栈）" class="headerlink" title="案例-列表功能改造（值栈）"></a>案例-列表功能改造（值栈）</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 1 定义list变量，get方法</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Customer&gt; list;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Customer&gt; <span class="title">getList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//客户列表</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">list</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//调用service</span></span><br><span class="line">        CustomerService service = <span class="keyword">new</span> CustomerService();</span><br><span class="line">        <span class="comment">// 返回数据放到值栈的list里面</span></span><br><span class="line">        list = service.findAll();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//放到域对象里面（明天讲到）</span></span><br><span class="line"><span class="comment">//        HttpServletRequest request = ServletActionContext.getRequest();</span></span><br><span class="line"><span class="comment">//        request.setAttribute(&quot;list&quot;, list);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;list&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;%-- 使用struts2标签+ognl实现 --%&gt;</span><br><span class="line">&lt;s:iterator value=<span class="string">&quot;list&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;customer&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">   &lt;TR</span><br><span class="line">      style=<span class="string">&quot;FONT-WEIGHT: normal; FONT-STYLE: normal; BACKGROUND-COLOR: white; TEXT-DECORATION: none&quot;</span>&gt;</span><br><span class="line">      &lt;TD&gt;</span><br><span class="line">         &lt;s:property value=<span class="string">&quot;#customer.custName&quot;</span>/&gt;</span><br><span class="line">      &lt;/TD&gt;</span><br><span class="line">      &lt;TD&gt;</span><br><span class="line">         &lt;s:property value=<span class="string">&quot;#customer.custLevel&quot;</span>/&gt;</span><br><span class="line">      &lt;/TD&gt;</span><br><span class="line">      &lt;TD&gt;</span><br><span class="line">         &lt;s:property value=<span class="string">&quot;#customer.custSource&quot;</span>/&gt;</span><br><span class="line">      &lt;/TD&gt;</span><br><span class="line">      &lt;TD&gt;</span><br><span class="line">         &lt;s:property value=<span class="string">&quot;#customer.custPhone&quot;</span>/&gt;</span><br><span class="line">      &lt;/TD&gt;</span><br><span class="line">      &lt;TD&gt;</span><br><span class="line">         &lt;s:property value=<span class="string">&quot;#customer.custMobile&quot;</span>/&gt;</span><br><span class="line">      &lt;/TD&gt;</span><br><span class="line">      &lt;TD&gt;</span><br><span class="line"></span><br><span class="line">      &lt;/TD&gt;</span><br><span class="line">   &lt;/TR&gt;</span><br><span class="line"></span><br><span class="line">&lt;/s:iterator&gt;</span><br></pre></td></tr></table></figure>



<h1 id="Struts2拦截器概述"><a href="#Struts2拦截器概述" class="headerlink" title="Struts2拦截器概述"></a>Struts2拦截器概述</h1><p><strong>1 struts2是框架，封装了很多的功能，struts2里面封装的功能都是在拦截器里面</strong></p>
<p><strong>2 struts2里面封装了很多的功能，有很多拦截器，不是每次这些拦截器都执行，每次执行默认的拦截器</strong></p>
<p><strong>3 struts2里面默认拦截器位置</strong></p>
<p><code>struts2-core-2.3.24.jar</code></p>
<p><code>struts-default.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Basic stack --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">interceptor-stack</span> <span class="attr">name</span>=<span class="string">&quot;basicStack&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">&quot;exception&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">&quot;servletConfig&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">&quot;prepare&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">&quot;checkbox&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">&quot;datetime&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">&quot;multiselect&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">&quot;actionMappingParams&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">&quot;params&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">&quot;conversionError&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">&quot;deprecation&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">interceptor-stack</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>4 拦截器在什么时候执行？</strong></p>
<p>1）在action对象创建之后，action的方法执行之前</p>
<h1 id="拦截器底层原理"><a href="#拦截器底层原理" class="headerlink" title="拦截器底层原理"></a>拦截器底层原理</h1><h2 id="拦截器底层使用两个原理"><a href="#拦截器底层使用两个原理" class="headerlink" title="拦截器底层使用两个原理"></a>拦截器底层使用两个原理</h2><p><strong>1 aop思想</strong></p>
<p>1）文字描述：</p>
<p>Aop是面向切面（方面）编程，有基本功能，扩展功能，不通过修改源代码方式扩展功能</p>
<p>2）画图分析：</p>
<p><img src="/struts2/aop%E6%80%9D%E6%83%B3.png" alt="aop思想"></p>
<p><strong>2 责任链模式</strong></p>
<p>1）在java中有很多的设计模式，责任链模式是其中的一种</p>
<p>2）责任链模式和过滤链很相似的</p>
<p>责任链模式：</p>
<p>要执行多个操作，有添加、修改、删除三个操作。</p>
<p>首先执行添加操作，添加操作执行之后 做类似于放行操作，执行修改操作，修改操作执行之后做类似于放行操作，执行删除操作</p>
<p>过滤链：一个请求可有多个过滤器进行过滤，每个过滤器只有做放行才能到下一个过滤器</p>
<p><img src="/struts2/%E8%BF%87%E6%BB%A4%E9%93%BE.png" alt="过滤链"></p>
<h2 id="aop思想和责任链模式如何应用到拦截器里面？"><a href="#aop思想和责任链模式如何应用到拦截器里面？" class="headerlink" title="aop思想和责任链模式如何应用到拦截器里面？"></a>aop思想和责任链模式如何应用到拦截器里面？</h2><p><strong>1 文字描述：</strong></p>
<p>拦截器在action对象创建之后，action的方法执行之前执行</p>
<p>在action方法执行之前执行默认拦截器，执行过程使用aop思想，在action没有直接调用拦截器的方法，使用配置文件方式进行操作</p>
<p>在执行拦截器时候，执行很多的拦截器，这个过程使用责任链模式</p>
<p>假如执行三个拦截器，执行拦截器1，执行拦截器1之后做放行操作，执行拦截器2，执行拦截器2之后做放行，执行拦截器3，执行拦截器3之后放行，执行action的方法</p>
<p><strong>2 画图分析</strong></p>
<p><img src="/struts2/aop%E6%80%9D%E6%83%B3%E5%92%8C%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F%E5%A6%82%E4%BD%95%E5%BA%94%E7%94%A8%E5%88%B0%E6%8B%A6%E6%88%AA%E5%99%A8%E9%87%8C%E9%9D%A2.png" alt="aop思想和责任链模式如何应用到拦截器里面"></p>
<p><strong>3 查看源代码</strong></p>
<p>1）执行action</p>
<p><img src="/struts2/1%EF%BC%89%E6%89%A7%E8%A1%8Caction.png" alt="1）执行action"></p>
<p>2）创建action对象，使用动态代理方式</p>
<p><img src="/struts2/2%EF%BC%89%E5%88%9B%E5%BB%BAaction%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%BD%BF%E7%94%A8%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%96%B9%E5%BC%8F.png" alt="2）创建action对象，使用动态代理方式"></p>
<p>3）执行action的方法</p>
<p><img src="/struts2/3%EF%BC%89%E6%89%A7%E8%A1%8Caction%E7%9A%84%E6%96%B9%E6%B3%95.png" alt="3）执行action的方法"></p>
<p>4）执行很多的拦截器，遍历执行</p>
<p><img src="/struts2/4%EF%BC%89%E6%89%A7%E8%A1%8C%E5%BE%88%E5%A4%9A%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8%EF%BC%8C%E9%81%8D%E5%8E%86%E6%89%A7%E8%A1%8C.png" alt="4）执行很多的拦截器，遍历执行"></p>
<p>类似于放行的操作的方法</p>
<p><img src="/struts2/%E7%B1%BB%E4%BC%BC%E4%BA%8E%E6%94%BE%E8%A1%8C%E7%9A%84%E6%93%8D%E4%BD%9C%E7%9A%84%E6%96%B9%E6%B3%95.png" alt="类似于放行的操作的方法"></p>
<h1 id="重要的概念"><a href="#重要的概念" class="headerlink" title="重要的概念"></a>重要的概念</h1><h2 id="过滤器和拦截器区别"><a href="#过滤器和拦截器区别" class="headerlink" title="过滤器和拦截器区别"></a>过滤器和拦截器区别</h2><p><strong>1 过滤器：过滤器理论上可以任意内容，比如html、jsp、servlet、图片路径</strong></p>
<p><strong>2 拦截器：拦截器只可以拦截action</strong></p>
<h2 id="Servlet和action区别"><a href="#Servlet和action区别" class="headerlink" title="Servlet和action区别"></a>Servlet和action区别</h2><p><strong>1 servlet默认第一次访问时候创建，创建一次，单实例对象</strong></p>
<p><strong>2 action每次访问时候创建，创建多次，多实例对象</strong></p>
<h1 id="自定义拦截器"><a href="#自定义拦截器" class="headerlink" title="自定义拦截器"></a>自定义拦截器</h1><p><strong>1 在struts2里面有很多的拦截器，这些拦截器是struts2封装的功能，但是在实际开发中，struts2里面的拦截器中可以没有要使用的功能，这个时候需要自己写拦截器实现功能</strong></p>
<p>1）查看源代码看拦截器结构</p>
<p>继承类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ModelDrivenInterceptor</span> <span class="keyword">extends</span> <span class="title">AbstractInterceptor</span> </span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractInterceptor</span> <span class="keyword">implements</span> <span class="title">Interceptor</span> </span>&#123;</span><br></pre></td></tr></table></figure>

<p>在接口里面有三个方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;	<span class="comment">// 初始化操作</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;		<span class="comment">// 销毁</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">intercept</span><span class="params">(ActionInvocation var1)</span> <span class="keyword">throws</span> Exception</span>;	</span><br><span class="line"><span class="comment">// 拦截逻辑的操作</span></span><br></pre></td></tr></table></figure>



<p>2）开发中，建议使用另外一种方式</p>
<p>写类，继承 MethodFilterInterceptor类实现</p>
<p>让action里面某个的方法不进行拦截</p>
<p>3）让拦截器和action有关系</p>
<p>不是在action调用拦截器的方法，而是通过配置文件方式让建立关系</p>
<h1 id="自定义登录拦截器"><a href="#自定义登录拦截器" class="headerlink" title="自定义登录拦截器"></a>自定义登录拦截器</h1><p><strong>1 需求：在项目中，有很多的action的超链接，实现只有是登录的状态，才可以点击action的超链接实现功能，如果不是登录状态，点击action超链接返回到登录页面</strong></p>
<p><strong>2 登录的状态：使用session域对象实现</strong></p>
<p>1）登录成功之后，把数据放到session里面</p>
<p>2）判断session是否有值，可以知道是否是登录状态</p>
<p><strong>3 实现登录的基本功能</strong></p>
<p>1）查询数据库判断用户名和密码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 登录</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1 得到request对象</span></span><br><span class="line">        HttpServletRequest request = ServletActionContext.getRequest();</span><br><span class="line">        String username = request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password = request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2 查询数据库判断用户名和密码是否正确</span></span><br><span class="line">        CustomerService service = <span class="keyword">new</span> CustomerService();</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setUser_name(username);</span><br><span class="line">        user.setUser_password(password);</span><br><span class="line">        <span class="keyword">boolean</span> flag = service.login(user);</span><br><span class="line"><span class="comment">//        System.out.println(flag);</span></span><br><span class="line">        <span class="keyword">if</span> (flag == <span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="comment">// 成功</span></span><br><span class="line">            <span class="comment">// 向session里面传入值</span></span><br><span class="line">            request.getSession().setAttribute(<span class="string">&quot;username&quot;</span>, username);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;loginsuccess&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 失败</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<p><strong>4 添加登录拦截器功能</strong></p>
<p>1）判断是否登录：判断session里面是否有名称是username的值</p>
<p>2）拦截器实现过程</p>
<p>第一步 创建类，继承MethodFilterInterceptor类</p>
<p>第二步 重写MethodFilterInterceptor类里面的方法写拦截器逻辑</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionInvocation;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.interceptor.MethodFilterInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.apache.struts2.ServletActionContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 拦截器类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginInterceptor</span> <span class="keyword">extends</span> <span class="title">MethodFilterInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 这个方法里面写拦截器逻辑</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">doIntercept</span><span class="params">(ActionInvocation actionInvocation)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionInvocation;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.interceptor.MethodFilterInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.apache.struts2.ServletActionContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 拦截器类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginInterceptor</span> <span class="keyword">extends</span> <span class="title">MethodFilterInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 这个方法里面写拦截器逻辑</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">doIntercept</span><span class="params">(ActionInvocation actionInvocation)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断session里面是否有名称是username的值</span></span><br><span class="line">        <span class="comment">// 得到session</span></span><br><span class="line">        HttpServletRequest request = ServletActionContext.getRequest();</span><br><span class="line">        Object obj = request.getSession().getAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断</span></span><br><span class="line">        <span class="keyword">if</span> (obj != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 登录状态</span></span><br><span class="line">            <span class="comment">// 做类似于放行操作，执行action的方法</span></span><br><span class="line">            <span class="keyword">return</span> actionInvocation.invoke();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 不是登录状态</span></span><br><span class="line">            <span class="comment">// 不到登录，不执行action的方法，返回登录页面</span></span><br><span class="line">            <span class="comment">// 到result标签里面找到名称是login的值，到配置路径里面</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>第三步 配置action和拦截器关系（注册拦截器）</p>
<p>1）在要拦截的action标签所在的package标签里面声明拦截器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 声明拦截器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">interceptors</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">interceptor</span> <span class="attr">name</span>=<span class="string">&quot;loginintercept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.demo.interceptor.LoginInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>2）在具体的action标签里面使用声明的拦截器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用自定义拦截器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">&quot;loginintercept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">interceptor-ref</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>3）struts2里面执行很多的默认拦截器，但是如果在action里面配置自定义拦截器，</p>
<p>问题：默认的拦截器不会执行了</p>
<p>解决：把默认拦截器手动使用一次</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 把默认拦截器手动使用一次 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">&quot;defaultStack&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">interceptor-ref</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>5 配置拦截器，对action里面所有的方法都进行拦截</strong></p>
<p>1）在action里面有login的登录的方法，这个方法不需要拦截，如果这个方法都拦截，问题是，永远登录不进去了</p>
<p>2）解决：让login方法不进行拦截</p>
<p>直接通过配置方式让action里面某些方法不进行拦截</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用自定义拦截器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">&quot;loginintercept&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 配置action里面某些方法不进行拦截</span></span><br><span class="line"><span class="comment">       name属性值：excludeMethods</span></span><br><span class="line"><span class="comment">       值：action不拦截的方法名称</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;excludeMethods&quot;</span>&gt;</span>login<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">interceptor-ref</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>6 如果登录状态，直接到功能页面，如果不是登录显示登陆页面</strong></p>
<p>登录之后出现小问题：</p>
<p><img src="/struts2/%E7%99%BB%E5%BD%95%E4%B9%8B%E5%90%8E%E5%87%BA%E7%8E%B0%E5%B0%8F%E9%97%AE%E9%A2%98.png" alt="登录之后出现小问题"></p>
<p>1）设置打开位置，在form标签里面</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">target=<span class="string">&quot;_parent&quot;</span></span><br></pre></td></tr></table></figure>



<h1 id="Struts2的标签库"><a href="#Struts2的标签库" class="headerlink" title="Struts2的标签库"></a>Struts2的标签库</h1><p><strong>0 struts2标签使用jsp页面中</strong></p>
<p><strong>1 s:property： 和ognl表达式在jsp页面中获取值栈数据</strong></p>
<p><strong>2 s:iterator: 获取值栈list集合数据，表示list集合</strong></p>
<p><strong>3 s:debug: 查看值栈结构和数据</strong></p>
<h1 id="Struts2表单标签（会用）"><a href="#Struts2表单标签（会用）" class="headerlink" title="Struts2表单标签（会用）"></a>Struts2表单标签（会用）</h1><p><strong>1 html表单标签</strong></p>
<p>1）form : action、method、enctype</p>
<p>2）输入项</p>
<p>大部分在input里面封装 type=”值”</p>
<p>text：普通输入项</p>
<p>password：密码输入项</p>
<p>radio：单选输入项</p>
<p>checkbox：复选输入项</p>
<p>file：文件上传项</p>
<p>hidden：隐藏项</p>
<p>button：普通按钮</p>
<p>submit：提交按钮</p>
<p>image：图片提交</p>
<p>reset：重置</p>
<p>select：下拉输入项</p>
<p>textarea：文本域</p>
<p><strong>2 在struts2里面对应html表单标签大部分都有</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- form标签 --&gt;</span><br><span class="line">&lt;s:form&gt;</span><br><span class="line">   &lt;!-- <span class="number">1</span> 普通输入项 --&gt;</span><br><span class="line">   &lt;s:textfield name=&quot;username&quot; label=&quot;username&quot;&gt;&lt;/s:textfield&gt;</span><br><span class="line">   </span><br><span class="line">   &lt;!-- <span class="number">2</span> 密码输入项 --&gt;</span><br><span class="line">   &lt;s:password name=&quot;password&quot; label=&quot;password&quot;&gt;&lt;/s:password&gt;</span><br><span class="line">   </span><br><span class="line">   &lt;!-- <span class="number">3</span> 单选输入项 --&gt;</span><br><span class="line">   &lt;!-- value属性值和显示值一样的 --&gt;</span><br><span class="line">   &lt;s:radio list=&quot;&#123;&#x27;女&#x27;,&#x27;男&#x27;&#125;&quot; name=&quot;sex&quot; label=&quot;性别&quot;&gt;&lt;/s:radio&gt;</span><br><span class="line">   </span><br><span class="line">   &lt;!-- value属性值和显示值不一样的 --&gt;</span><br><span class="line">   &lt;s:radio list=&quot;#&#123;&#x27;nv&#x27;:&#x27;女&#x27;,&#x27;nan&#x27;:&#x27;男&#x27;&#125;&quot; name=&quot;sex1&quot; label=&quot;性别&quot;&gt;&lt;/s:radio&gt;</span><br><span class="line">   </span><br><span class="line">   &lt;!-- <span class="number">4</span> 复习输入项 --&gt;</span><br><span class="line">   &lt;s:checkboxlist list=&quot;&#123;&#x27;吃饭&#x27;,&#x27;睡觉&#x27;,&#x27;敲代码&#x27;&#125;&quot; name=&quot;love&quot; label=&quot;爱好&quot;&gt;&lt;/s:checkboxlist&gt;</span><br><span class="line">   </span><br><span class="line">   &lt;!-- <span class="number">5</span> 下拉输入框 --&gt;</span><br><span class="line">   &lt;s:select list=&quot;&#123;&#x27;幼儿园&#x27;,&#x27;博士后&#x27;,&#x27;教授&#x27;&#125;&quot; name=&quot;college&quot; label=&quot;学历&quot;&gt;&lt;/s:select&gt;  </span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">6</span> 文件上传项 --&gt;</span><br><span class="line">   &lt;s:file name=&quot;file&quot; label=&quot;上传文件&quot;&gt;&lt;/s:file&gt;</span><br><span class="line">   </span><br><span class="line">   &lt;!-- <span class="number">7</span> 隐藏项 --&gt;</span><br><span class="line">   &lt;s:hidden name=&quot;hid&quot; value=&quot;abcd&quot;&gt;&lt;/s:hidden&gt;</span><br><span class="line">   </span><br><span class="line">   &lt;!--  文本域 --&gt; </span><br><span class="line">   &lt;s:textarea rows=&quot;10&quot; cols=&quot;3&quot; name=&quot;resume&quot; label=&quot;简历&quot;&gt;&lt;/s:textarea&gt;</span><br><span class="line">   </span><br><span class="line">   &lt;!-- <span class="number">8</span> 提交按钮 --&gt;</span><br><span class="line">   &lt;s:submit value=&quot;提交&quot;&gt;&lt;/s:submit&gt;</span><br><span class="line">   </span><br><span class="line">   &lt;!-- <span class="number">9</span> 重置 --&gt;</span><br><span class="line">   &lt;s:reset value=&quot;重置&quot;&gt;&lt;/s:reset&gt;</span><br><span class="line">&lt;/s:form&gt;</span><br></pre></td></tr></table></figure>



<h1 id="ssh练习中的两个知识点"><a href="#ssh练习中的两个知识点" class="headerlink" title="ssh练习中的两个知识点"></a>ssh练习中的两个知识点</h1><h2 id="struts2文件上传"><a href="#struts2文件上传" class="headerlink" title="struts2文件上传"></a>struts2文件上传</h2><h2 id="错误处理机制-input"><a href="#错误处理机制-input" class="headerlink" title="错误处理机制 input"></a>错误处理机制 input</h2><h1 id="Struts2总结"><a href="#Struts2总结" class="headerlink" title="Struts2总结"></a>Struts2总结</h1><p><strong>1 Action</strong></p>
<p>1）action创建（继承ActionSupport类）</p>
<p>2）配置访问action的方法（通配符）</p>
<p>3）action获取表单数据</p>
<p>模型驱动</p>
<p>4）action操作域对象</p>
<p>5）result标签里面type属性</p>
<p><strong>2 值栈</strong></p>
<p>1）值栈结构</p>
<p>2）向值栈放数据</p>
<p>3）从值栈获取数据</p>
<p><strong>3 拦截器</strong></p>
<p>1）拦截器原理</p>
<p>2）自定义拦截器</p>
<p>继承类</p>
<p>写拦截器逻辑</p>
<p>配置拦截器</p>
<p>配置让action某些方法不进行拦截</p>
<h1 id="ERROR-1"><a href="#ERROR-1" class="headerlink" title="ERROR#1"></a>ERROR#1</h1><h3 id="struts-xml中extends-”struts-default”报错"><a href="#struts-xml中extends-”struts-default”报错" class="headerlink" title="struts.xml中extends=”struts-default”报错"></a>struts.xml中extends=”struts-default”报错</h3><p><strong>提示：此种解决方法只适用于Intellij IDEA，MyEclipse或者Eclipse还得另寻它法，但估计原因应该是类似的。</strong></p>
<blockquote>
<p>在<strong>Intellij IDEA 2017使用Struts2框架</strong>时，若新建项目时并未导入Struts2框架而是在后期手动新建lib目录导入Struts2框架后，可能出现在配置<strong>struts.xml</strong>时**extends=”struts-default”**会报错，如下图：</p>
</blockquote>
<p><img src="/struts2/error#1.png" alt="error#1"></p>
<blockquote>
<p>显示的错误为<strong>Cannot resolve Struts Package ‘struts-default’. Validates struts.xml files for syntactic and reference errors</strong>，原因是<strong>引用struts-default错误</strong>，解决的方法：依次打开<strong>File &gt; Project Structure &gt; Facets &gt; Struts2</strong>，点击<strong>铅笔</strong>进行修改，勾选上<strong>Struts2-core-2.3.24.jar</strong>即可，<strong>struts-default.xml</strong>会被自动勾选上，保存设置即可：</p>
</blockquote>
<p><img src="/struts2/error#1-1.png" alt="error#1-1"></p>
<h1 id="ERROR-2"><a href="#ERROR-2" class="headerlink" title="ERROR#2"></a>ERROR#2</h1><h3 id="访问路径问题"><a href="#访问路径问题" class="headerlink" title="访问路径问题"></a>访问路径问题</h3><blockquote>
<p>发现URL变为：<a target="_blank" rel="noopener" href="http://localhost:8080/demostruts2_war_exploded/">http://localhost:8080/demostruts2_war_exploded/</a><br>中间多了：_war_exploded/<br>解决方法：打开idea-》run–》edit Configurations-》ApplicationContext: / </p>
</blockquote>
<p><img src="/struts2/ERROR#2.png" alt="ERROR#2"></p>
<p><strong>idea和eclipse的区别</strong></p>
<p>当我们使用 eclipse 开发 web 项目时，项目的路径一般是 localhost:8080/项目名，不同的项目对应的项目名不一样，而在使用 idea 的时候，访问时的路径直接就变成了 localhost:8080，项目名没有了</p>
<p>首先明确一点：idea 中项目的访问路径是可以自定义的，方法如下</p>
<p><code>Run —&gt; Edit Configurations —&gt; Deployment</code></p>
<p><code>在右侧的 Application context 中填入访问时的路径，这个路径是从8080后面开始的，包括斜杠</code></p>
<p>为什么用 idea 的时候只需要输入 localhost:8080 就可以访问到项目，这是因为 idea 为每个项目都单独配置了 tomcat，而 eclipse 是把多个项目都统一放到一个 tomcat 中。我们都知道，tomcat 在发布项目的时候一般都是把项目放在 webapps 里面，所以如果 webapps 里面有多个项目，那么我们访问不同的项目时就需要以项目名来区分，而只有一个的话就不需要了，所以在访问路径上就出现了差别</p>
<p><strong>struts2动态方法调用</strong></p>
<p>在动态方法调用时，方式之一就是通过在浏览器地址栏中输入 ! 加不同的方法名来访问不同的方法，如果使用的是 idea 编辑器，访问路径就应该是这样的，如</p>
<p><img src="/struts2/%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98.png" alt="路径问题"></p>
<p>也就是说，在我们配置的访问路径之后加上配置文件中配置的相应的值</p>
<p>特别注意：不管是不是用了动态方法调用，在路径的最后都别再加斜杠了，自己曾经因为这个被坑得很惨，特此提醒一下</p>
<h1 id="ERROR-3"><a href="#ERROR-3" class="headerlink" title="ERROR#3"></a>ERROR#3</h1><h3 id="自定义页面404"><a href="#自定义页面404" class="headerlink" title="自定义页面404"></a>自定义页面404</h3><p><img src="/struts2/ERROR#2-2.png" alt="ERROR#2-2"></p>
<blockquote>
<p>Project Structure -&gt; Project Settings -&gt; Artifacts -&gt;  把里面的删除重新添加一下</p>
</blockquote>
<p><img src="/struts2/ERROR#2-3.png" alt="ERROR#2-3"></p>
<blockquote>
<p>Add -&gt; Web Application:Exploded -&gt; From Modules… -&gt; select -&gt; ok</p>
</blockquote>
<p><img src="/struts2/ERROR#2-5.png" alt="ERROR#2-5"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">supertramp</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://supertramp7.github.io/struts2/">https://supertramp7.github.io/struts2/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://supertramp7.github.io" target="_blank">Supertramp</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/java/">java</a><a class="post-meta__tags" href="/tags/ssh/">ssh</a><a class="post-meta__tags" href="/tags/%E6%A1%86%E6%9E%B6/">框架</a><a class="post-meta__tags" href="/tags/struts2/">struts2</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/hibernate/"><img class="prev-cover" src="/hibernate/hibernate.png" onerror="onerror=null;src='/img/404.gif'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Hibernate知识点</div></div></a></div><div class="next-post pull-right"><a href="/spring/"><img class="next-cover" src="/spring/spring.png" onerror="onerror=null;src='/img/404.gif'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Spring知识点</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/assets/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">supertramp</div><div class="author-info__description">You're being watched.</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">6</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/supertramp7" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">hello world!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Struts2%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">Struts2概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Struts2%E6%A1%86%E6%9E%B6%E5%85%A5%E9%97%A8"><span class="toc-number">2.</span> <span class="toc-text">Struts2框架入门</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Struts2%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text">Struts2执行过程</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%BA%90%E4%BB%A3%E7%A0%81"><span class="toc-number">4.</span> <span class="toc-text">查看源代码</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Struts2%E7%9A%84%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">5.</span> <span class="toc-text">Struts2的核心配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E7%AD%BEpackage"><span class="toc-number">5.1.</span> <span class="toc-text">标签package</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E7%AD%BEaction"><span class="toc-number">5.2.</span> <span class="toc-text">标签action</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E7%AD%BEresult"><span class="toc-number">5.3.</span> <span class="toc-text">标签result</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Struts2%E5%B8%B8%E9%87%8F%E9%85%8D%E7%BD%AE"><span class="toc-number">6.</span> <span class="toc-text">Struts2常量配置</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91"><span class="toc-number">7.</span> <span class="toc-text">分模块开发</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Action%E7%BC%96%E5%86%99%E6%96%B9%E5%BC%8F"><span class="toc-number">8.</span> <span class="toc-text">Action编写方式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%99%AE%E9%80%9A%E7%B1%BB%EF%BC%8C%E8%BF%99%E4%B8%AA%E4%B8%8D%E7%BB%A7%E6%89%BF%E4%BB%BB%E4%BD%95%E7%B1%BB%EF%BC%8C%E4%B8%8D%E5%AE%9E%E7%8E%B0%E4%BB%BB%E4%BD%95%E6%8E%A5%E5%8F%A3"><span class="toc-number">8.1.</span> <span class="toc-text">创建普通类，这个不继承任何类，不实现任何接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%B1%BB%EF%BC%8C%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3-Action"><span class="toc-number">8.2.</span> <span class="toc-text">创建类，实现接口 Action</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%B1%BB%EF%BC%8C%E7%BB%A7%E6%89%BF%E7%B1%BB-ActionSupport%EF%BC%88%E4%B8%80%E8%88%AC%E4%BD%BF%E7%94%A8%EF%BC%89"><span class="toc-number">8.3.</span> <span class="toc-text">创建类，继承类 ActionSupport（一般使用）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%BF%E9%97%AEaction%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">9.</span> <span class="toc-text">访问action的方法（重点）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8action%E6%A0%87%E7%AD%BEmethod%E5%B1%9E%E6%80%A7"><span class="toc-number">9.1.</span> <span class="toc-text">使用action标签method属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E5%AE%9E%E7%8E%B0%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">9.2.</span> <span class="toc-text">使用通配符实现（重点）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-%E5%AE%A2%E6%88%B7%E5%88%97%E8%A1%A8"><span class="toc-number">10.</span> <span class="toc-text">案例-客户列表</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%93%E6%9E%9C%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE"><span class="toc-number">11.</span> <span class="toc-text">结果页面配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E7%BB%93%E6%9E%9C%E9%A1%B5%E9%9D%A2"><span class="toc-number">11.1.</span> <span class="toc-text">全局结果页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E7%BB%93%E6%9E%9C%E9%A1%B5%E9%9D%A2"><span class="toc-number">11.2.</span> <span class="toc-text">局部结果页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Result%E6%A0%87%E7%AD%BE%E7%9A%84type%E5%B1%9E%E6%80%A7"><span class="toc-number">11.3.</span> <span class="toc-text">Result标签的type属性</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Action%E8%8E%B7%E5%8F%96%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">12.</span> <span class="toc-text">Action获取表单提交数据</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8ActionContext%E7%B1%BB%E8%8E%B7%E5%8F%96"><span class="toc-number">12.1.</span> <span class="toc-text">使用ActionContext类获取</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8ServletActionContext%E7%B1%BB%E8%8E%B7%E5%8F%96"><span class="toc-number">12.2.</span> <span class="toc-text">使用ServletActionContext类获取</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3%E6%B3%A8%E5%85%A5%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">12.3.</span> <span class="toc-text">使用接口注入（了解）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8action%E6%93%8D%E4%BD%9C%E5%9F%9F%E5%AF%B9%E8%B1%A1"><span class="toc-number">12.4.</span> <span class="toc-text">在action操作域对象</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Struts2%E5%B0%81%E8%A3%85%E8%8E%B7%E5%8F%96%E8%A1%A8%E5%8D%95%E6%95%B0%E6%8D%AE%E6%96%B9%E5%BC%8F"><span class="toc-number">13.</span> <span class="toc-text">Struts2封装获取表单数据方式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E5%A7%8B%E6%96%B9%E5%BC%8F%E8%8E%B7%E5%8F%96%E8%A1%A8%E5%8D%95%E5%B0%81%E8%A3%85%E5%88%B0%E5%AE%9E%E4%BD%93%E7%B1%BB%E5%AF%B9%E8%B1%A1"><span class="toc-number">13.1.</span> <span class="toc-text">原始方式获取表单封装到实体类对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E5%B0%81%E8%A3%85%EF%BC%88%E4%BC%9A%E7%94%A8%EF%BC%89"><span class="toc-number">13.2.</span> <span class="toc-text">属性封装（会用）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9E%8B%E9%A9%B1%E5%8A%A8%E5%B0%81%E8%A3%85%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">13.3.</span> <span class="toc-text">模型驱动封装（重点）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%B0%81%E8%A3%85%EF%BC%88%E4%BC%9A%E7%94%A8%EF%BC%89"><span class="toc-number">13.4.</span> <span class="toc-text">表达式封装（会用）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%B0%81%E8%A3%85%E5%92%8C%E6%A8%A1%E5%9E%8B%E9%A9%B1%E5%8A%A8%E5%B0%81%E8%A3%85"><span class="toc-number">13.5.</span> <span class="toc-text">比较表达式封装和模型驱动封装</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E5%88%B0%E9%9B%86%E5%90%88%E9%87%8C%E9%9D%A2"><span class="toc-number">14.</span> <span class="toc-text">封装到集合里面</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E6%95%B0%E6%8D%AE%E5%88%B0List%E9%9B%86%E5%90%88"><span class="toc-number">14.1.</span> <span class="toc-text">封装数据到List集合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E6%95%B0%E6%8D%AE%E5%88%B0Map%E9%9B%86%E5%90%88"><span class="toc-number">14.2.</span> <span class="toc-text">封装数据到Map集合</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E6%95%B0%E6%8D%AE%E6%80%BB%E7%BB%93"><span class="toc-number">15.</span> <span class="toc-text">封装数据总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-%E6%B7%BB%E5%8A%A0%E5%AE%A2%E6%88%B7%E5%8A%9F%E8%83%BD"><span class="toc-number">16.</span> <span class="toc-text">案例-添加客户功能</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#OGNL%E6%A6%82%E8%BF%B0"><span class="toc-number">17.</span> <span class="toc-text">OGNL概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#OGNL%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">18.</span> <span class="toc-text">OGNL入门案例</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%80%BC%E6%A0%88"><span class="toc-number">19.</span> <span class="toc-text">什么是值栈</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%80%BC%E6%A0%88%E5%AF%B9%E8%B1%A1"><span class="toc-number">20.</span> <span class="toc-text">获取值栈对象</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%80%BC%E6%A0%88%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84"><span class="toc-number">21.</span> <span class="toc-text">值栈内部结构</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%91%E5%80%BC%E6%A0%88%E6%94%BE%E6%95%B0%E6%8D%AE"><span class="toc-number">22.</span> <span class="toc-text">向值栈放数据</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%91%E5%80%BC%E6%A0%88%E6%94%BE%E5%AF%B9%E8%B1%A1"><span class="toc-number">22.1.</span> <span class="toc-text">向值栈放对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%91%E5%80%BC%E6%A0%88%E6%94%BElist%E9%9B%86%E5%90%88"><span class="toc-number">22.2.</span> <span class="toc-text">向值栈放list集合</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%8E%E5%80%BC%E6%A0%88%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">23.</span> <span class="toc-text">从值栈获取数据</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">23.1.</span> <span class="toc-text">获取字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%AF%B9%E8%B1%A1"><span class="toc-number">23.2.</span> <span class="toc-text">获取对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96list%E9%9B%86%E5%90%88"><span class="toc-number">23.3.</span> <span class="toc-text">获取list集合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%93%8D%E4%BD%9C"><span class="toc-number">23.4.</span> <span class="toc-text">其他操作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#EL%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%8E%B7%E5%8F%96%E5%80%BC%E6%A0%88%E6%95%B0%E6%8D%AE%EF%BC%88%E4%B8%BA%E4%BB%80%E4%B9%88%EF%BC%89"><span class="toc-number">24.</span> <span class="toc-text">EL表达式获取值栈数据（为什么）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#OGNL%E7%9A%84-%E3%80%81-%E4%BD%BF%E7%94%A8"><span class="toc-number">25.</span> <span class="toc-text">OGNL的#、%使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">25.1.</span> <span class="toc-text">#使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-1"><span class="toc-number">25.2.</span> <span class="toc-text">%使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-%E5%88%97%E8%A1%A8%E5%8A%9F%E8%83%BD%E6%94%B9%E9%80%A0%EF%BC%88%E5%80%BC%E6%A0%88%EF%BC%89"><span class="toc-number">26.</span> <span class="toc-text">案例-列表功能改造（值栈）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Struts2%E6%8B%A6%E6%88%AA%E5%99%A8%E6%A6%82%E8%BF%B0"><span class="toc-number">27.</span> <span class="toc-text">Struts2拦截器概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-number">28.</span> <span class="toc-text">拦截器底层原理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8%E5%BA%95%E5%B1%82%E4%BD%BF%E7%94%A8%E4%B8%A4%E4%B8%AA%E5%8E%9F%E7%90%86"><span class="toc-number">28.1.</span> <span class="toc-text">拦截器底层使用两个原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aop%E6%80%9D%E6%83%B3%E5%92%8C%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F%E5%A6%82%E4%BD%95%E5%BA%94%E7%94%A8%E5%88%B0%E6%8B%A6%E6%88%AA%E5%99%A8%E9%87%8C%E9%9D%A2%EF%BC%9F"><span class="toc-number">28.2.</span> <span class="toc-text">aop思想和责任链模式如何应用到拦截器里面？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%87%8D%E8%A6%81%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">29.</span> <span class="toc-text">重要的概念</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E5%99%A8%E5%92%8C%E6%8B%A6%E6%88%AA%E5%99%A8%E5%8C%BA%E5%88%AB"><span class="toc-number">29.1.</span> <span class="toc-text">过滤器和拦截器区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet%E5%92%8Caction%E5%8C%BA%E5%88%AB"><span class="toc-number">29.2.</span> <span class="toc-text">Servlet和action区别</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">30.</span> <span class="toc-text">自定义拦截器</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%99%BB%E5%BD%95%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">31.</span> <span class="toc-text">自定义登录拦截器</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Struts2%E7%9A%84%E6%A0%87%E7%AD%BE%E5%BA%93"><span class="toc-number">32.</span> <span class="toc-text">Struts2的标签库</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Struts2%E8%A1%A8%E5%8D%95%E6%A0%87%E7%AD%BE%EF%BC%88%E4%BC%9A%E7%94%A8%EF%BC%89"><span class="toc-number">33.</span> <span class="toc-text">Struts2表单标签（会用）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ssh%E7%BB%83%E4%B9%A0%E4%B8%AD%E7%9A%84%E4%B8%A4%E4%B8%AA%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">34.</span> <span class="toc-text">ssh练习中的两个知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#struts2%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">34.1.</span> <span class="toc-text">struts2文件上传</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6-input"><span class="toc-number">34.2.</span> <span class="toc-text">错误处理机制 input</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Struts2%E6%80%BB%E7%BB%93"><span class="toc-number">35.</span> <span class="toc-text">Struts2总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ERROR-1"><span class="toc-number">36.</span> <span class="toc-text">ERROR#1</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#struts-xml%E4%B8%ADextends-%E2%80%9Dstruts-default%E2%80%9D%E6%8A%A5%E9%94%99"><span class="toc-number">36.0.1.</span> <span class="toc-text">struts.xml中extends&#x3D;”struts-default”报错</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ERROR-2"><span class="toc-number">37.</span> <span class="toc-text">ERROR#2</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="toc-number">37.0.1.</span> <span class="toc-text">访问路径问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ERROR-3"><span class="toc-number">38.</span> <span class="toc-text">ERROR#3</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E9%9D%A2404"><span class="toc-number">38.0.1.</span> <span class="toc-text">自定义页面404</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/hibernate/" title="Hibernate知识点"><img src="/hibernate/hibernate.png" onerror="this.onerror=null;this.src='/img/404.gif'" alt="Hibernate知识点"/></a><div class="content"><a class="title" href="/hibernate/" title="Hibernate知识点">Hibernate知识点</a><time datetime="2022-03-10T17:09:09.000Z" title="发表于 2022-03-11 01:09:09">2022-03-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/struts2/" title="Struts2知识点"><img src="/struts2/struts2.png" onerror="this.onerror=null;this.src='/img/404.gif'" alt="Struts2知识点"/></a><div class="content"><a class="title" href="/struts2/" title="Struts2知识点">Struts2知识点</a><time datetime="2022-03-10T17:08:48.000Z" title="发表于 2022-03-11 01:08:48">2022-03-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/spring/" title="Spring知识点"><img src="/spring/spring.png" onerror="this.onerror=null;this.src='/img/404.gif'" alt="Spring知识点"/></a><div class="content"><a class="title" href="/spring/" title="Spring知识点">Spring知识点</a><time datetime="2022-03-08T00:54:30.000Z" title="发表于 2022-03-08 08:54:30">2022-03-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mybatis/" title="学习mybatis的一些坑"><img src="/mybatis/mybatis.jpg" onerror="this.onerror=null;this.src='/img/404.gif'" alt="学习mybatis的一些坑"/></a><div class="content"><a class="title" href="/mybatis/" title="学习mybatis的一些坑">学习mybatis的一些坑</a><time datetime="2021-02-19T08:27:31.000Z" title="发表于 2021-02-19 16:27:31">2021-02-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/springboot/" title="SpringBoot知识点"><img src="/springboot/springboot.jpg" onerror="this.onerror=null;this.src='/img/404.gif'" alt="SpringBoot知识点"/></a><div class="content"><a class="title" href="/springboot/" title="SpringBoot知识点">SpringBoot知识点</a><time datetime="2021-02-18T16:00:00.000Z" title="发表于 2021-02-19 00:00:00">2021-02-19</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/struts2/struts2.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By supertramp</div><div class="footer_custom_text">boring</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"></div></div></body></html>